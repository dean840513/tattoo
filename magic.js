"use strict";var Magic=(()=>{var _i=Object.create;var rt=Object.defineProperty;var Ii=Object.getOwnPropertyDescriptor;var wi=Object.getOwnPropertyNames;var Ri=Object.getPrototypeOf,bi=Object.prototype.hasOwnProperty;var qe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var hr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mr=(e,t)=>{for(var r in t)rt(e,r,{get:t[r],enumerable:!0})},pr=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of wi(t))!bi.call(e,a)&&a!==r&&rt(e,a,{get:()=>t[a],enumerable:!(i=Ii(t,a))||i.enumerable});return e};var vr=(e,t,r)=>(r=e!=null?_i(Ri(e)):{},pr(t||!e||!e.__esModule?rt(r,"default",{value:e,enumerable:!0}):r,e)),Si=e=>pr(rt({},"__esModule",{value:!0}),e);var Rn=hr((wn,qt)=>{"use strict";(function(e){if(typeof wn=="object"&&typeof qt<"u")qt.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function i(a,s,p){function h(y,O){if(!s[y]){if(!a[y]){var g=typeof qe=="function"&&qe;if(!O&&g)return g(y,!0);if(w)return w(y,!0);var N=new Error("Cannot find module '"+y+"'");throw N.code="MODULE_NOT_FOUND",N}var D=s[y]={exports:{}};a[y][0].call(D.exports,function(F){var L=a[y][1][F];return h(L||F)},D,D.exports,i,a,s,p)}return s[y].exports}for(var w=typeof qe=="function"&&qe,v=0;v<p.length;v++)h(p[v]);return h}({1:[function(i,a,s){(function(p){"use strict";var h=p.MutationObserver||p.WebKitMutationObserver,w;if(h){var v=0,y=new h(F),O=p.document.createTextNode("");y.observe(O,{characterData:!0}),w=function(){O.data=v=++v%2}}else if(!p.setImmediate&&typeof p.MessageChannel<"u"){var g=new p.MessageChannel;g.port1.onmessage=F,w=function(){g.port2.postMessage(0)}}else"document"in p&&"onreadystatechange"in p.document.createElement("script")?w=function(){var W=p.document.createElement("script");W.onreadystatechange=function(){F(),W.onreadystatechange=null,W.parentNode.removeChild(W),W=null},p.document.documentElement.appendChild(W)}:w=function(){setTimeout(F,0)};var N,D=[];function F(){N=!0;for(var W,J,$=D.length;$;){for(J=D,D=[],W=-1;++W<$;)J[W]();$=D.length}N=!1}a.exports=L;function L(W){D.push(W)===1&&!N&&w()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(i,a,s){"use strict";var p=i(1);function h(){}var w={},v=["REJECTED"],y=["FULFILLED"],O=["PENDING"];a.exports=g;function g(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=O,this.queue=[],this.outcome=void 0,A!==h&&L(this,A)}g.prototype.catch=function(A){return this.then(null,A)},g.prototype.then=function(A,B){if(typeof A!="function"&&this.state===y||typeof B!="function"&&this.state===v)return this;var x=new this.constructor(h);if(this.state!==O){var H=this.state===y?A:B;D(x,H,this.outcome)}else this.queue.push(new N(x,A,B));return x};function N(A,B,x){this.promise=A,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}N.prototype.callFulfilled=function(A){w.resolve(this.promise,A)},N.prototype.otherCallFulfilled=function(A){D(this.promise,this.onFulfilled,A)},N.prototype.callRejected=function(A){w.reject(this.promise,A)},N.prototype.otherCallRejected=function(A){D(this.promise,this.onRejected,A)};function D(A,B,x){p(function(){var H;try{H=B(x)}catch(Q){return w.reject(A,Q)}H===A?w.reject(A,new TypeError("Cannot resolve promise with itself")):w.resolve(A,H)})}w.resolve=function(A,B){var x=W(F,B);if(x.status==="error")return w.reject(A,x.value);var H=x.value;if(H)L(A,H);else{A.state=y,A.outcome=B;for(var Q=-1,ie=A.queue.length;++Q<ie;)A.queue[Q].callFulfilled(B)}return A},w.reject=function(A,B){A.state=v,A.outcome=B;for(var x=-1,H=A.queue.length;++x<H;)A.queue[x].callRejected(B);return A};function F(A){var B=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof B=="function")return function(){B.apply(A,arguments)}}function L(A,B){var x=!1;function H(se){x||(x=!0,w.reject(A,se))}function Q(se){x||(x=!0,w.resolve(A,se))}function ie(){B(Q,H)}var oe=W(ie);oe.status==="error"&&H(oe.value)}function W(A,B){var x={};try{x.value=A(B),x.status="success"}catch(H){x.status="error",x.value=H}return x}g.resolve=J;function J(A){return A instanceof this?A:w.resolve(new this(h),A)}g.reject=$;function $(A){var B=new this(h);return w.reject(B,A)}g.all=Re;function Re(A){var B=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=A.length,H=!1;if(!x)return this.resolve([]);for(var Q=new Array(x),ie=0,oe=-1,se=new this(h);++oe<x;)he(A[oe],oe);return se;function he(Ce,f){B.resolve(Ce).then(_,function(S){H||(H=!0,w.reject(se,S))});function _(S){Q[f]=S,++ie===x&&!H&&(H=!0,w.resolve(se,Q))}}}g.race=ne;function ne(A){var B=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=A.length,H=!1;if(!x)return this.resolve([]);for(var Q=-1,ie=new this(h);++Q<x;)oe(A[Q]);return ie;function oe(se){B.resolve(se).then(function(he){H||(H=!0,w.resolve(ie,he))},function(he){H||(H=!0,w.reject(ie,he))})}}},{1:1}],3:[function(i,a,s){(function(p){"use strict";typeof p.Promise!="function"&&(p.Promise=i(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(i,a,s){"use strict";var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function h(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")}function w(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var v=w();function y(){try{if(!v||!v.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),c=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||c)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function O(n,c){n=n||[],c=c||{};try{return new Blob(n,c)}catch(l){if(l.name!=="TypeError")throw l;for(var o=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new o,d=0;d<n.length;d+=1)u.append(n[d]);return u.getBlob(c.type)}}typeof Promise>"u"&&i(3);var g=Promise;function N(n,c){c&&n.then(function(o){c(null,o)},function(o){c(o)})}function D(n,c,o){typeof c=="function"&&n.then(c),typeof o=="function"&&n.catch(o)}function F(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function L(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var W="local-forage-detect-blob-support",J=void 0,$={},Re=Object.prototype.toString,ne="readonly",A="readwrite";function B(n){for(var c=n.length,o=new ArrayBuffer(c),u=new Uint8Array(o),d=0;d<c;d++)u[d]=n.charCodeAt(d);return o}function x(n){return new g(function(c){var o=n.transaction(W,A),u=O([""]);o.objectStore(W).put(u,"key"),o.onabort=function(d){d.preventDefault(),d.stopPropagation(),c(!1)},o.oncomplete=function(){var d=navigator.userAgent.match(/Chrome\/(\d+)/),l=navigator.userAgent.match(/Edge\//);c(l||!d||parseInt(d[1],10)>=43)}}).catch(function(){return!1})}function H(n){return typeof J=="boolean"?g.resolve(J):x(n).then(function(c){return J=c,J})}function Q(n){var c=$[n.name],o={};o.promise=new g(function(u,d){o.resolve=u,o.reject=d}),c.deferredOperations.push(o),c.dbReady?c.dbReady=c.dbReady.then(function(){return o.promise}):c.dbReady=o.promise}function ie(n){var c=$[n.name],o=c.deferredOperations.pop();if(o)return o.resolve(),o.promise}function oe(n,c){var o=$[n.name],u=o.deferredOperations.pop();if(u)return u.reject(c),u.promise}function se(n,c){return new g(function(o,u){if($[n.name]=$[n.name]||Z(),n.db)if(c)Q(n),n.db.close();else return o(n.db);var d=[n.name];c&&d.push(n.version);var l=v.open.apply(v,d);c&&(l.onupgradeneeded=function(m){var E=l.result;try{E.createObjectStore(n.storeName),m.oldVersion<=1&&E.createObjectStore(W)}catch(I){if(I.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+m.oldVersion+" to version "+m.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw I}}),l.onerror=function(m){m.preventDefault(),u(l.error)},l.onsuccess=function(){var m=l.result;m.onversionchange=function(E){E.target.close()},o(m),ie(n)}})}function he(n){return se(n,!1)}function Ce(n){return se(n,!0)}function f(n,c){if(!n.db)return!0;var o=!n.db.objectStoreNames.contains(n.storeName),u=n.version<n.db.version,d=n.version>n.db.version;if(u&&(n.version!==c&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),d||o){if(o){var l=n.db.version+1;l>n.version&&(n.version=l)}return!0}return!1}function _(n){return new g(function(c,o){var u=new FileReader;u.onerror=o,u.onloadend=function(d){var l=btoa(d.target.result||"");c({__local_forage_encoded_blob:!0,data:l,type:n.type})},u.readAsBinaryString(n)})}function S(n){var c=B(atob(n.data));return O([c],{type:n.type})}function C(n){return n&&n.__local_forage_encoded_blob}function P(n){var c=this,o=c._initReady().then(function(){var u=$[c._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return D(o,n,n),o}function U(n){Q(n);for(var c=$[n.name],o=c.forages,u=0;u<o.length;u++){var d=o[u];d._dbInfo.db&&(d._dbInfo.db.close(),d._dbInfo.db=null)}return n.db=null,he(n).then(function(l){return n.db=l,f(n)?Ce(n):l}).then(function(l){n.db=c.db=l;for(var m=0;m<o.length;m++)o[m]._dbInfo.db=l}).catch(function(l){throw oe(n,l),l})}function V(n,c,o,u){u===void 0&&(u=1);try{var d=n.db.transaction(n.storeName,c);o(null,d)}catch(l){if(u>0&&(!n.db||l.name==="InvalidStateError"||l.name==="NotFoundError"))return g.resolve().then(function(){if(!n.db||l.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),Ce(n)}).then(function(){return U(n).then(function(){V(n,c,o,u-1)})}).catch(o);o(l)}}function Z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Fe(n){var c=this,o={db:null};if(n)for(var u in n)o[u]=n[u];var d=$[o.name];d||(d=Z(),$[o.name]=d),d.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=P);var l=[];function m(){return g.resolve()}for(var E=0;E<d.forages.length;E++){var I=d.forages[E];I!==c&&l.push(I._initReady().catch(m))}var R=d.forages.slice(0);return g.all(l).then(function(){return o.db=d.db,he(o)}).then(function(b){return o.db=b,f(o,c._defaultConfig.version)?Ce(o):b}).then(function(b){o.db=d.db=b,c._dbInfo=o;for(var T=0;T<R.length;T++){var k=R[T];k!==c&&(k._dbInfo.db=o.db,k._dbInfo.version=o.version)}})}function Pe(n,c){var o=this;n=F(n);var u=new g(function(d,l){o.ready().then(function(){V(o._dbInfo,ne,function(m,E){if(m)return l(m);try{var I=E.objectStore(o._dbInfo.storeName),R=I.get(n);R.onsuccess=function(){var b=R.result;b===void 0&&(b=null),C(b)&&(b=S(b)),d(b)},R.onerror=function(){l(R.error)}}catch(b){l(b)}})}).catch(l)});return N(u,c),u}function Ve(n,c){var o=this,u=new g(function(d,l){o.ready().then(function(){V(o._dbInfo,ne,function(m,E){if(m)return l(m);try{var I=E.objectStore(o._dbInfo.storeName),R=I.openCursor(),b=1;R.onsuccess=function(){var T=R.result;if(T){var k=T.value;C(k)&&(k=S(k));var j=n(k,T.key,b++);j!==void 0?d(j):T.continue()}else d()},R.onerror=function(){l(R.error)}}catch(T){l(T)}})}).catch(l)});return N(u,c),u}function An(n,c,o){var u=this;n=F(n);var d=new g(function(l,m){var E;u.ready().then(function(){return E=u._dbInfo,Re.call(c)==="[object Blob]"?H(E.db).then(function(I){return I?c:_(c)}):c}).then(function(I){V(u._dbInfo,A,function(R,b){if(R)return m(R);try{var T=b.objectStore(u._dbInfo.storeName);I===null&&(I=void 0);var k=T.put(I,n);b.oncomplete=function(){I===void 0&&(I=null),l(I)},b.onabort=b.onerror=function(){var j=k.error?k.error:k.transaction.error;m(j)}}catch(j){m(j)}})}).catch(m)});return N(d,o),d}function On(n,c){var o=this;n=F(n);var u=new g(function(d,l){o.ready().then(function(){V(o._dbInfo,A,function(m,E){if(m)return l(m);try{var I=E.objectStore(o._dbInfo.storeName),R=I.delete(n);E.oncomplete=function(){d()},E.onerror=function(){l(R.error)},E.onabort=function(){var b=R.error?R.error:R.transaction.error;l(b)}}catch(b){l(b)}})}).catch(l)});return N(u,c),u}function Nn(n){var c=this,o=new g(function(u,d){c.ready().then(function(){V(c._dbInfo,A,function(l,m){if(l)return d(l);try{var E=m.objectStore(c._dbInfo.storeName),I=E.clear();m.oncomplete=function(){u()},m.onabort=m.onerror=function(){var R=I.error?I.error:I.transaction.error;d(R)}}catch(R){d(R)}})}).catch(d)});return N(o,n),o}function Tn(n){var c=this,o=new g(function(u,d){c.ready().then(function(){V(c._dbInfo,ne,function(l,m){if(l)return d(l);try{var E=m.objectStore(c._dbInfo.storeName),I=E.count();I.onsuccess=function(){u(I.result)},I.onerror=function(){d(I.error)}}catch(R){d(R)}})}).catch(d)});return N(o,n),o}function Mn(n,c){var o=this,u=new g(function(d,l){if(n<0){d(null);return}o.ready().then(function(){V(o._dbInfo,ne,function(m,E){if(m)return l(m);try{var I=E.objectStore(o._dbInfo.storeName),R=!1,b=I.openKeyCursor();b.onsuccess=function(){var T=b.result;if(!T){d(null);return}n===0||R?d(T.key):(R=!0,T.advance(n))},b.onerror=function(){l(b.error)}}catch(T){l(T)}})}).catch(l)});return N(u,c),u}function Ln(n){var c=this,o=new g(function(u,d){c.ready().then(function(){V(c._dbInfo,ne,function(l,m){if(l)return d(l);try{var E=m.objectStore(c._dbInfo.storeName),I=E.openKeyCursor(),R=[];I.onsuccess=function(){var b=I.result;if(!b){u(R);return}R.push(b.key),b.continue()},I.onerror=function(){d(I.error)}}catch(b){d(b)}})}).catch(d)});return N(o,n),o}function Cn(n,c){c=L.apply(this,arguments);var o=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||o.name,n.storeName=n.storeName||o.storeName);var u=this,d;if(!n.name)d=g.reject("Invalid arguments");else{var l=n.name===o.name&&u._dbInfo.db,m=l?g.resolve(u._dbInfo.db):he(n).then(function(E){var I=$[n.name],R=I.forages;I.db=E;for(var b=0;b<R.length;b++)R[b]._dbInfo.db=E;return E});n.storeName?d=m.then(function(E){if(E.objectStoreNames.contains(n.storeName)){var I=E.version+1;Q(n);var R=$[n.name],b=R.forages;E.close();for(var T=0;T<b.length;T++){var k=b[T];k._dbInfo.db=null,k._dbInfo.version=I}var j=new g(function(q,z){var X=v.open(n.name,I);X.onerror=function(ue){var He=X.result;He.close(),z(ue)},X.onupgradeneeded=function(){var ue=X.result;ue.deleteObjectStore(n.storeName)},X.onsuccess=function(){var ue=X.result;ue.close(),q(ue)}});return j.then(function(q){R.db=q;for(var z=0;z<b.length;z++){var X=b[z];X._dbInfo.db=q,ie(X._dbInfo)}}).catch(function(q){throw(oe(n,q)||g.resolve()).catch(function(){}),q})}}):d=m.then(function(E){Q(n);var I=$[n.name],R=I.forages;E.close();for(var b=0;b<R.length;b++){var T=R[b];T._dbInfo.db=null}var k=new g(function(j,q){var z=v.deleteDatabase(n.name);z.onerror=function(){var X=z.result;X&&X.close(),q(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},z.onsuccess=function(){var X=z.result;X&&X.close(),j(X)}});return k.then(function(j){I.db=j;for(var q=0;q<R.length;q++){var z=R[q];ie(z._dbInfo)}}).catch(function(j){throw(oe(n,j)||g.resolve()).catch(function(){}),j})})}return N(d,c),d}var Pn={_driver:"asyncStorage",_initStorage:Fe,_support:y(),iterate:Ve,getItem:Pe,setItem:An,removeItem:On,clear:Nn,length:Tn,key:Mn,keys:Ln,dropInstance:Cn};function Dn(){return typeof openDatabase=="function"}var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$n="~~local_forage_type~",Yt=/^~~local_forage_type~([^~]+)~/,et="__lfsc__:",It=et.length,wt="arbf",Rt="blob",Xt="si08",zt="ui08",Jt="uic8",Qt="si16",Zt="si32",er="ur16",tr="ui32",rr="fl32",nr="fl64",ir=It+wt.length,ar=Object.prototype.toString;function or(n){var c=n.length*.75,o=n.length,u,d=0,l,m,E,I;n[n.length-1]==="="&&(c--,n[n.length-2]==="="&&c--);var R=new ArrayBuffer(c),b=new Uint8Array(R);for(u=0;u<o;u+=4)l=be.indexOf(n[u]),m=be.indexOf(n[u+1]),E=be.indexOf(n[u+2]),I=be.indexOf(n[u+3]),b[d++]=l<<2|m>>4,b[d++]=(m&15)<<4|E>>2,b[d++]=(E&3)<<6|I&63;return R}function bt(n){var c=new Uint8Array(n),o="",u;for(u=0;u<c.length;u+=3)o+=be[c[u]>>2],o+=be[(c[u]&3)<<4|c[u+1]>>4],o+=be[(c[u+1]&15)<<2|c[u+2]>>6],o+=be[c[u+2]&63];return c.length%3===2?o=o.substring(0,o.length-1)+"=":c.length%3===1&&(o=o.substring(0,o.length-2)+"=="),o}function Un(n,c){var o="";if(n&&(o=ar.call(n)),n&&(o==="[object ArrayBuffer]"||n.buffer&&ar.call(n.buffer)==="[object ArrayBuffer]")){var u,d=et;n instanceof ArrayBuffer?(u=n,d+=wt):(u=n.buffer,o==="[object Int8Array]"?d+=Xt:o==="[object Uint8Array]"?d+=zt:o==="[object Uint8ClampedArray]"?d+=Jt:o==="[object Int16Array]"?d+=Qt:o==="[object Uint16Array]"?d+=er:o==="[object Int32Array]"?d+=Zt:o==="[object Uint32Array]"?d+=tr:o==="[object Float32Array]"?d+=rr:o==="[object Float64Array]"?d+=nr:c(new Error("Failed to get type for BinaryArray"))),c(d+bt(u))}else if(o==="[object Blob]"){var l=new FileReader;l.onload=function(){var m=$n+n.type+"~"+bt(this.result);c(et+Rt+m)},l.readAsArrayBuffer(n)}else try{c(JSON.stringify(n))}catch(m){console.error("Couldn't convert value into a JSON string: ",n),c(null,m)}}function xn(n){if(n.substring(0,It)!==et)return JSON.parse(n);var c=n.substring(ir),o=n.substring(It,ir),u;if(o===Rt&&Yt.test(c)){var d=c.match(Yt);u=d[1],c=c.substring(d[0].length)}var l=or(c);switch(o){case wt:return l;case Rt:return O([l],{type:u});case Xt:return new Int8Array(l);case zt:return new Uint8Array(l);case Jt:return new Uint8ClampedArray(l);case Qt:return new Int16Array(l);case er:return new Uint16Array(l);case Zt:return new Int32Array(l);case tr:return new Uint32Array(l);case rr:return new Float32Array(l);case nr:return new Float64Array(l);default:throw new Error("Unkown type: "+o)}}var St={serialize:Un,deserialize:xn,stringToBuffer:or,bufferToString:bt};function sr(n,c,o,u){n.executeSql("CREATE TABLE IF NOT EXISTS "+c.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],o,u)}function Fn(n){var c=this,o={db:null};if(n)for(var u in n)o[u]=typeof n[u]!="string"?n[u].toString():n[u];var d=new g(function(l,m){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(E){return m(E)}o.db.transaction(function(E){sr(E,o,function(){c._dbInfo=o,l()},function(I,R){m(R)})},m)});return o.serializer=St,d}function Se(n,c,o,u,d,l){n.executeSql(o,u,d,function(m,E){E.code===E.SYNTAX_ERR?m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[c.storeName],function(I,R){R.rows.length?l(I,E):sr(I,c,function(){I.executeSql(o,u,d,l)},l)},l):l(m,E)},l)}function kn(n,c){var o=this;n=F(n);var u=new g(function(d,l){o.ready().then(function(){var m=o._dbInfo;m.db.transaction(function(E){Se(E,m,"SELECT * FROM "+m.storeName+" WHERE key = ? LIMIT 1",[n],function(I,R){var b=R.rows.length?R.rows.item(0).value:null;b&&(b=m.serializer.deserialize(b)),d(b)},function(I,R){l(R)})})}).catch(l)});return N(u,c),u}function Wn(n,c){var o=this,u=new g(function(d,l){o.ready().then(function(){var m=o._dbInfo;m.db.transaction(function(E){Se(E,m,"SELECT * FROM "+m.storeName,[],function(I,R){for(var b=R.rows,T=b.length,k=0;k<T;k++){var j=b.item(k),q=j.value;if(q&&(q=m.serializer.deserialize(q)),q=n(q,j.key,k+1),q!==void 0){d(q);return}}d()},function(I,R){l(R)})})}).catch(l)});return N(u,c),u}function cr(n,c,o,u){var d=this;n=F(n);var l=new g(function(m,E){d.ready().then(function(){c===void 0&&(c=null);var I=c,R=d._dbInfo;R.serializer.serialize(c,function(b,T){T?E(T):R.db.transaction(function(k){Se(k,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[n,b],function(){m(I)},function(j,q){E(q)})},function(k){if(k.code===k.QUOTA_ERR){if(u>0){m(cr.apply(d,[n,I,o,u-1]));return}E(k)}})})}).catch(E)});return N(l,o),l}function Bn(n,c,o){return cr.apply(this,[n,c,o,1])}function Gn(n,c){var o=this;n=F(n);var u=new g(function(d,l){o.ready().then(function(){var m=o._dbInfo;m.db.transaction(function(E){Se(E,m,"DELETE FROM "+m.storeName+" WHERE key = ?",[n],function(){d()},function(I,R){l(R)})})}).catch(l)});return N(u,c),u}function Vn(n){var c=this,o=new g(function(u,d){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(m){Se(m,l,"DELETE FROM "+l.storeName,[],function(){u()},function(E,I){d(I)})})}).catch(d)});return N(o,n),o}function jn(n){var c=this,o=new g(function(u,d){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(m){Se(m,l,"SELECT COUNT(key) as c FROM "+l.storeName,[],function(E,I){var R=I.rows.item(0).c;u(R)},function(E,I){d(I)})})}).catch(d)});return N(o,n),o}function Hn(n,c){var o=this,u=new g(function(d,l){o.ready().then(function(){var m=o._dbInfo;m.db.transaction(function(E){Se(E,m,"SELECT key FROM "+m.storeName+" WHERE id = ? LIMIT 1",[n+1],function(I,R){var b=R.rows.length?R.rows.item(0).key:null;d(b)},function(I,R){l(R)})})}).catch(l)});return N(u,c),u}function qn(n){var c=this,o=new g(function(u,d){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(m){Se(m,l,"SELECT key FROM "+l.storeName,[],function(E,I){for(var R=[],b=0;b<I.rows.length;b++)R.push(I.rows.item(b).key);u(R)},function(E,I){d(I)})})}).catch(d)});return N(o,n),o}function Kn(n){return new g(function(c,o){n.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(d,l){for(var m=[],E=0;E<l.rows.length;E++)m.push(l.rows.item(E).name);c({db:n,storeNames:m})},function(d,l){o(l)})},function(u){o(u)})})}function Yn(n,c){c=L.apply(this,arguments);var o=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||o.name,n.storeName=n.storeName||o.storeName);var u=this,d;return n.name?d=new g(function(l){var m;n.name===o.name?m=u._dbInfo.db:m=openDatabase(n.name,"","",0),n.storeName?l({db:m,storeNames:[n.storeName]}):l(Kn(m))}).then(function(l){return new g(function(m,E){l.db.transaction(function(I){function R(j){return new g(function(q,z){I.executeSql("DROP TABLE IF EXISTS "+j,[],function(){q()},function(X,ue){z(ue)})})}for(var b=[],T=0,k=l.storeNames.length;T<k;T++)b.push(R(l.storeNames[T]));g.all(b).then(function(){m()}).catch(function(j){E(j)})},function(I){E(I)})})}):d=g.reject("Invalid arguments"),N(d,c),d}var Xn={_driver:"webSQLStorage",_initStorage:Fn,_support:Dn(),iterate:Wn,getItem:kn,setItem:Bn,removeItem:Gn,clear:Vn,length:jn,key:Hn,keys:qn,dropInstance:Yn};function zn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function lr(n,c){var o=n.name+"/";return n.storeName!==c.storeName&&(o+=n.storeName+"/"),o}function Jn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function Qn(){return!Jn()||localStorage.length>0}function Zn(n){var c=this,o={};if(n)for(var u in n)o[u]=n[u];return o.keyPrefix=lr(n,c._defaultConfig),Qn()?(c._dbInfo=o,o.serializer=St,g.resolve()):g.reject()}function ei(n){var c=this,o=c.ready().then(function(){for(var u=c._dbInfo.keyPrefix,d=localStorage.length-1;d>=0;d--){var l=localStorage.key(d);l.indexOf(u)===0&&localStorage.removeItem(l)}});return N(o,n),o}function ti(n,c){var o=this;n=F(n);var u=o.ready().then(function(){var d=o._dbInfo,l=localStorage.getItem(d.keyPrefix+n);return l&&(l=d.serializer.deserialize(l)),l});return N(u,c),u}function ri(n,c){var o=this,u=o.ready().then(function(){for(var d=o._dbInfo,l=d.keyPrefix,m=l.length,E=localStorage.length,I=1,R=0;R<E;R++){var b=localStorage.key(R);if(b.indexOf(l)===0){var T=localStorage.getItem(b);if(T&&(T=d.serializer.deserialize(T)),T=n(T,b.substring(m),I++),T!==void 0)return T}}});return N(u,c),u}function ni(n,c){var o=this,u=o.ready().then(function(){var d=o._dbInfo,l;try{l=localStorage.key(n)}catch{l=null}return l&&(l=l.substring(d.keyPrefix.length)),l});return N(u,c),u}function ii(n){var c=this,o=c.ready().then(function(){for(var u=c._dbInfo,d=localStorage.length,l=[],m=0;m<d;m++){var E=localStorage.key(m);E.indexOf(u.keyPrefix)===0&&l.push(E.substring(u.keyPrefix.length))}return l});return N(o,n),o}function ai(n){var c=this,o=c.keys().then(function(u){return u.length});return N(o,n),o}function oi(n,c){var o=this;n=F(n);var u=o.ready().then(function(){var d=o._dbInfo;localStorage.removeItem(d.keyPrefix+n)});return N(u,c),u}function si(n,c,o){var u=this;n=F(n);var d=u.ready().then(function(){c===void 0&&(c=null);var l=c;return new g(function(m,E){var I=u._dbInfo;I.serializer.serialize(c,function(R,b){if(b)E(b);else try{localStorage.setItem(I.keyPrefix+n,R),m(l)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(T),E(T)}})})});return N(d,o),d}function ci(n,c){if(c=L.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var o=this.config();n.name=n.name||o.name,n.storeName=n.storeName||o.storeName}var u=this,d;return n.name?d=new g(function(l){n.storeName?l(lr(n,u._defaultConfig)):l(n.name+"/")}).then(function(l){for(var m=localStorage.length-1;m>=0;m--){var E=localStorage.key(m);E.indexOf(l)===0&&localStorage.removeItem(E)}}):d=g.reject("Invalid arguments"),N(d,c),d}var li={_driver:"localStorageWrapper",_initStorage:Zn,_support:zn(),iterate:ri,getItem:ti,setItem:si,removeItem:oi,clear:ei,length:ai,key:ni,keys:ii,dropInstance:ci},ui=function(c,o){return c===o||typeof c=="number"&&typeof o=="number"&&isNaN(c)&&isNaN(o)},di=function(c,o){for(var u=c.length,d=0;d<u;){if(ui(c[d],o))return!0;d++}return!1},ur=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},je={},dr={},ke={INDEXEDDB:Pn,WEBSQL:Xn,LOCALSTORAGE:li},fi=[ke.INDEXEDDB._driver,ke.WEBSQL._driver,ke.LOCALSTORAGE._driver],tt=["dropInstance"],At=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),hi={description:"",driver:fi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function mi(n,c){n[c]=function(){var o=arguments;return n.ready().then(function(){return n[c].apply(n,o)})}}function Ot(){for(var n=1;n<arguments.length;n++){var c=arguments[n];if(c)for(var o in c)c.hasOwnProperty(o)&&(ur(c[o])?arguments[0][o]=c[o].slice():arguments[0][o]=c[o])}return arguments[0]}var pi=function(){function n(c){h(this,n);for(var o in ke)if(ke.hasOwnProperty(o)){var u=ke[o],d=u._driver;this[o]=d,je[d]||this.defineDriver(u)}this._defaultConfig=Ot({},hi),this._config=Ot({},this._defaultConfig,c),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(o){if((typeof o>"u"?"undefined":p(o))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var u in o){if(u==="storeName"&&(o[u]=o[u].replace(/\W/g,"_")),u==="version"&&typeof o[u]!="number")return new Error("Database version must be a number.");this._config[u]=o[u]}return"driver"in o&&o.driver?this.setDriver(this._config.driver):!0}else return typeof o=="string"?this._config[o]:this._config},n.prototype.defineDriver=function(o,u,d){var l=new g(function(m,E){try{var I=o._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!o._driver){E(R);return}for(var b=At.concat("_initStorage"),T=0,k=b.length;T<k;T++){var j=b[T],q=!di(tt,j);if((q||o[j])&&typeof o[j]!="function"){E(R);return}}var z=function(){for(var He=function(Ei){return function(){var gi=new Error("Method "+Ei+" is not implemented by the current driver"),fr=g.reject(gi);return N(fr,arguments[arguments.length-1]),fr}},Nt=0,yi=tt.length;Nt<yi;Nt++){var Tt=tt[Nt];o[Tt]||(o[Tt]=He(Tt))}};z();var X=function(He){je[I]&&console.info("Redefining LocalForage driver: "+I),je[I]=o,dr[I]=He,m()};"_support"in o?o._support&&typeof o._support=="function"?o._support().then(X,E):X(!!o._support):X(!0)}catch(ue){E(ue)}});return D(l,u,d),l},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(o,u,d){var l=je[o]?g.resolve(je[o]):g.reject(new Error("Driver not found."));return D(l,u,d),l},n.prototype.getSerializer=function(o){var u=g.resolve(St);return D(u,o),u},n.prototype.ready=function(o){var u=this,d=u._driverSet.then(function(){return u._ready===null&&(u._ready=u._initDriver()),u._ready});return D(d,o,o),d},n.prototype.setDriver=function(o,u,d){var l=this;ur(o)||(o=[o]);var m=this._getSupportedDrivers(o);function E(){l._config.driver=l.driver()}function I(T){return l._extend(T),E(),l._ready=l._initStorage(l._config),l._ready}function R(T){return function(){var k=0;function j(){for(;k<T.length;){var q=T[k];return k++,l._dbInfo=null,l._ready=null,l.getDriver(q).then(I).catch(j)}E();var z=new Error("No available storage method found.");return l._driverSet=g.reject(z),l._driverSet}return j()}}var b=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=b.then(function(){var T=m[0];return l._dbInfo=null,l._ready=null,l.getDriver(T).then(function(k){l._driver=k._driver,E(),l._wrapLibraryMethodsWithReady(),l._initDriver=R(m)})}).catch(function(){E();var T=new Error("No available storage method found.");return l._driverSet=g.reject(T),l._driverSet}),D(this._driverSet,u,d),this._driverSet},n.prototype.supports=function(o){return!!dr[o]},n.prototype._extend=function(o){Ot(this,o)},n.prototype._getSupportedDrivers=function(o){for(var u=[],d=0,l=o.length;d<l;d++){var m=o[d];this.supports(m)&&u.push(m)}return u},n.prototype._wrapLibraryMethodsWithReady=function(){for(var o=0,u=At.length;o<u;o++)mi(this,At[o])},n.prototype.createInstance=function(o){return new n(o)},n}(),vi=new pi;a.exports=vi},{3:3}]},{},[4])(4)})});var Sn=hr((Et,bn)=>{"use strict";(function(e,t){typeof Et=="object"&&typeof bn<"u"?t(Et):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],t):t(e.LocalforageDriverMemory={})})(typeof self<"u"?self:Et,function(e){"use strict";var t="localforage-driver-memory";function r(f){var _=typeof Symbol=="function"&&f[Symbol.iterator],S=0;return _?_.call(f):{next:function(){return f&&S>=f.length&&(f=void 0),{value:f&&f[S++],done:!f}}}}function i(f,_){f=f||[],_=_||{};try{return new Blob(f,_)}catch(U){if(U.name!=="TypeError")throw U;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,C=new S,P=0;P<f.length;P+=1)C.append(f[P]);return C.getBlob(_.type)}}var a=/^~~local_forage_type~([^~]+)~/,s=9,p=s+4,h=Object.prototype.toString;function w(f){var _=f.length*.75,S=f.length;f[f.length-1]==="="&&(_--,f[f.length-2]==="="&&_--);for(var C=new ArrayBuffer(_),P=new Uint8Array(C),U=0,V=0;U<S;U+=4){var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f[U]),Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f[U+1]),Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f[U+2]),Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f[U+3]);P[V++]=Z<<2|Fe>>4,P[V++]=(Fe&15)<<4|Pe>>2,P[V++]=(Pe&3)<<6|Ve&63}return C}function v(f){for(var _=new Uint8Array(f),S="",C=0;C<_.length;C+=3)S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[C]>>2],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[C]&3)<<4|_[C+1]>>4],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[C+1]&15)<<2|_[C+2]>>6],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[C+2]&63];return _.length%3===2?S=S.substring(0,S.length-1)+"=":_.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function y(f,_){var S="";if(f&&(S=h.call(f)),f&&(S==="[object ArrayBuffer]"||f.buffer&&h.call(f.buffer)==="[object ArrayBuffer]")){var C=void 0,P="__lfsc__:";f instanceof ArrayBuffer?(C=f,P+="arbf"):(C=f.buffer,S==="[object Int8Array]"?P+="si08":S==="[object Uint8Array]"?P+="ui08":S==="[object Uint8ClampedArray]"?P+="uic8":S==="[object Int16Array]"?P+="si16":S==="[object Uint16Array]"?P+="ur16":S==="[object Int32Array]"?P+="si32":S==="[object Uint32Array]"?P+="ui32":S==="[object Float32Array]"?P+="fl32":S==="[object Float64Array]"?P+="fl64":_(new Error("Failed to get type for BinaryArray"))),_(P+v(C))}else if(S==="[object Blob]"){var U=new FileReader;U.onload=function(){var V="~~local_forage_type~"+f.type+"~"+v(this.result);_("__lfsc__:blob"+V)},U.readAsArrayBuffer(f)}else try{_(JSON.stringify(f))}catch(V){console.error("Couldn't convert value into a JSON string: ",f),_(null,V)}}function O(f){if(f.substring(0,s)!=="__lfsc__:")return JSON.parse(f);var _=f.substring(p),S=f.substring(s,p),C;if(S==="blob"&&a.test(_)){var P=_.match(a);C=P[1],_=_.substring(P[0].length)}var U=w(_);switch(S){case"arbf":return U;case"blob":return i([U],{type:C});case"si08":return new Int8Array(U);case"ui08":return new Uint8Array(U);case"uic8":return new Uint8ClampedArray(U);case"si16":return new Int16Array(U);case"ur16":return new Uint16Array(U);case"si32":return new Int32Array(U);case"ui32":return new Uint32Array(U);case"fl32":return new Float32Array(U);case"fl64":return new Float64Array(U);default:throw new Error("Unkown type: "+S)}}function g(f){var _,S;if(f===null||typeof f!="object"||"isActiveClone"in f)return f;var C=f instanceof Date?new Date(f):f.constructor();try{for(var P=r(Object.keys(f)),U=P.next();!U.done;U=P.next()){var V=U.value;Object.prototype.hasOwnProperty.call(f,V)&&(f.isActiveClone=null,C[V]=g(f[V]),delete f.isActiveClone)}}catch(Z){_={error:Z}}finally{try{U&&!U.done&&(S=P.return)&&S.call(P)}finally{if(_)throw _.error}}return C}function N(f,_){return(f.name||_.name)+"/"+(f.storeName||_.storeName)+"/"}function D(f,_){_&&f.then(function(S){_(null,S)},function(S){_(S)})}function F(){for(var f=[],_=0;_<arguments.length;_++)f[_]=arguments[_];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function L(f,_){var S=this;if(_=F.apply(this,arguments),f=typeof f!="function"&&f||{},!f.name){var C=this.config();f.name=f.name||C.name,f.storeName=f.storeName||C.storeName}var P;return f.name?P=new Promise(function(U){f.storeName?U(N(f,S._defaultConfig)):U(f.name+"/")}):P=Promise.reject("Invalid arguments"),{promise:P,callback:_}}function W(f){return typeof f!="string"&&(console.warn(f+" used as a key, but it is not a string."),f=String(f)),f}var J={bufferToString:v,deserialize:O,serialize:y,stringToBuffer:w},$={},Re=function(){function f(_){this.kp=_,this.data={}}return f.resolve=function(_){return $[_]||($[_]=new f(_)),$[_]},f.prototype.clear=function(){this.data={}},f.prototype.drop=function(){this.clear(),delete $[this.kp]},f.prototype.get=function(_){return this.data[_]},f.prototype.key=function(_){return this.keys()[_]},f.prototype.keys=function(){return Object.keys(this.data)},f.prototype.rm=function(_){delete this.data[_]},f.prototype.set=function(_,S){this.data[_]=S},f}();function ne(f){var _=f?g(f):{},S=N(_,this._defaultConfig),C=Re.resolve(S);return this._dbInfo=_,this._dbInfo.serializer=J,this._dbInfo.keyPrefix=S,this._dbInfo.mStore=C,Promise.resolve()}function A(f){var _=this,S=this.ready().then(function(){_._dbInfo.mStore.clear()});return D(S,f),S}function B(f,_){var S=L.apply(this,arguments),C=S.promise,P=S.callback,U=C.then(function(V){Re.resolve(V).drop()});return D(U,P),C}function x(f,_){var S=this;f=W(f);var C=this.ready().then(function(){var P=S._dbInfo.mStore.get(f);return P==null?null:S._dbInfo.serializer.deserialize(P)});return D(C,_),C}function H(f,_){var S=this,C=this.ready().then(function(){for(var P=S._dbInfo.mStore,U=P.keys(),V=0;V<U.length;V++){var Z=P.get(U[V]);if(Z&&(Z=S._dbInfo.serializer.deserialize(Z)),Z=f(Z,U[V],V+1),Z!==void 0)return Z}});return D(C,_),C}function Q(f,_){var S=this,C=this.ready().then(function(){var P;try{P=S._dbInfo.mStore.key(f),P===void 0&&(P=null)}catch{P=null}return P});return D(C,_),C}function ie(f){var _=this,S=this.ready().then(function(){return _._dbInfo.mStore.keys()});return D(S,f),S}function oe(f){var _=this.keys().then(function(S){return S.length});return D(_,f),_}function se(f,_){var S=this;f=W(f);var C=this.ready().then(function(){S._dbInfo.mStore.rm(f)});return D(C,_),C}function he(f,_,S){var C=this;f=W(f);var P=this.ready().then(function(){_===void 0&&(_=null);var U=_;return new Promise(function(V,Z){C._dbInfo.serializer.serialize(_,function(Fe,Pe){if(Pe)Z(Pe);else try{C._dbInfo.mStore.set(f,Fe),V(U)}catch(Ve){Z(Ve)}})})});return D(P,S),P}var Ce=!0;e._support=Ce,e._driver=t,e._initStorage=ne,e.clear=A,e.dropInstance=B,e.getItem=x,e.iterate=H,e.key=Q,e.keys=ie,e.length=oe,e.removeItem=se,e.setItem=he,Object.defineProperty(e,"__esModule",{value:!0})})});var Po={};mr(Po,{default:()=>Co});var ge=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.ConnectionLost="CONNECTION_WAS_LOST",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(ge||{}),_e=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e.ProductAnnouncement="ANNOUNCEMENT",e))(_e||{}),Ae=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e[e.DpopInvalidated=-10019]="DpopInvalidated",e))(Ae||{}),ve=(e=>(e.PROVIDER="magic_3pw_provider",e.ADDRESS="magic_3pw_address",e.CHAIN_ID="magic_3pw_chainId",e))(ve||{}),yr=(e=>(e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e.Web3ModalSelected="web3modal_selected",e))(yr||{}),M=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e.RevealPK="magic_reveal_key",e.EnableMFA="magic_auth_enable_mfa_flow",e.DisableMFA="magic_auth_disable_mfa_flow",e))(M||{}),Mt=["magic_intermediary_event","magic_nft_checkout","mc_login"],de=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e.MAGIC_SEND_PRODUCT_ANNOUNCEMENT="MAGIC_SEND_PRODUCT_ANNOUNCEMENT",e.MAGIC_PONG="MAGIC_PONG",e.MAGIC_POPUP_RESPONSE="MAGIC_POPUP_RESPONSE",e.MAGIC_POPUP_OAUTH_VERIFY_RESPONSE="MAGIC_POPUP_OAUTH_VERIFY_RESPONSE",e))(de||{}),Ie=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e.MAGIC_PING="MAGIC_PING",e))(Ie||{}),Er=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(Er||{}),gr=(e=>(e.Retry="retry",e))(gr||{}),_r=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(_r||{}),le=(e=>(e.VerifyEmailOtp="verify-email-otp",e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.VerifyRecoveryCode="verify-recovery-code",e.Cancel="cancel",e))(le||{}),De=(e=>(e.VerifySmsOtp="verify-sms-otp",e.Cancel="cancel",e.Retry="retry",e))(De||{}),Ir=(e=>(e.SmsOTPSent="sms-otp-sent",e.InvalidSmsOtp="invalid-sms-otp",e.ExpiredSmsOtp="expired-sms-otp",e))(Ir||{}),wr=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.InvalidMfaOtp="invalid-mfa-otp",e.ExpiredEmailOtp="expired-email-otp",e.MfaSentHandle="mfa-sent-handle",e.RecoveryCodeSentHandle="recovery-code-sent-handle",e.InvalidRecoveryCode="invalid-recovery-code",e.RecoveryCodeSuccess="recovery-code-success",e))(wr||{}),Ke=(e=>(e.Retry="device-retry",e))(Ke||{}),Rr=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Rr||{}),ce=(e=>(e.Retry="Recency/auth-factor-retry",e.Cancel="Recency/auth-factor-verification-cancel",e.VerifyEmailOtp="Recency/auth-factor-verify-email-otp",e.VerifyMFACode="Recency/verify-mfa-code",e))(ce||{}),br=(e=>(e.PrimaryAuthFactorNeedsVerification="Recency/auth-factor-needs-verification",e.PrimaryAuthFactorVerified="Recency/auth-factor-verified",e.InvalidEmailOtp="Recency/auth-factor-invalid-email-otp",e.EmailExpired="Recency/auth-factor-verification-email-expired",e.EmailSent="Recency/auth-factor-verification-email-sent",e.EmailNotDeliverable="Recency/auth-factor-verification-email-not-deliverable",e))(br||{}),te=(e=>(e.RetryWithNewEmail="UpdateEmail/retry-with-new-email",e.Cancel="UpdateEmail/new-email-verification-cancel",e.VerifyEmailOtp="UpdateEmail/new-email-verify-otp",e))(te||{}),Sr=(e=>(e.NewAuthFactorNeedsVerification="UpdateEmail/new-email-needs-verification",e.EmailUpdated="UpdateEmail/email-updated",e.InvalidEmailOtp="UpdateEmail/new-email-invalid-email-otp",e.EmailExpired="UpdateEmail/new-email-verification-email-expired",e.EmailSent="UpdateEmail/new-email-verification-email-sent",e.EmailNotDeliverable="UpdateEmail/new-email-verification-email-not-deliverable",e.InvalidEmail="UpdateEmail/new-email-invalid",e.EmailAlreadyExists="UpdateEmail/new-email-already-exists",e))(Sr||{}),Ar=(e=>(e.IDTokenCreated="Auth/id-token-created",e))(Ar||{}),Or=(e=>(e.Cancel="Farcaster/cancel",e))(Or||{}),Nr=(e=>(e.MFASecretGenerated="mfa-secret-generated",e.InvalidMFAOtp="invalid-mfa-otp",e.MFARecoveryCodes="mfa-recovery-codes",e))(Nr||{}),$e=(e=>(e.VerifyMFACode="verify-mfa-code",e.Cancel="cancel-mfa-setup",e))($e||{}),Tr=(e=>(e.MFACodeRequested="mfa-code-requested",e.InvalidMFAOtp="invalid-mfa-otp",e.InvalidRecoveryCode="invalid-recovery-code",e))(Tr||{}),we=(e=>(e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.Cancel="cancel-mfa-disable",e))(we||{}),Mr=(e=>(e.Harmony="HARMONY",e))(Mr||{}),nt=(e=>(e.ClosedByUser="closed-by-user",e))(nt||{}),it=(e=>(e.ClosedByUser="closed-by-user-on-received",e))(it||{}),Lr=(e=>(e.EnterNewPhoneNumber="enter-new-phone-number",e.EnterOtpCode="enter-otp-code",e.RecoveryFactorAlreadyExists="recovery-factor-already-exists",e.MalformedPhoneNumber="malformed-phone-number",e.InvalidOtpCode="invalid-otp-code",e))(Lr||{}),me=(e=>(e.SendNewPhoneNumber="send-new-phone-number",e.SendOtpCode="send-otp-code",e.Cancel="cancel",e.StartEditPhoneNumber="start-edit-phone-number",e))(me||{}),Cr=(e=>(e.PhoneNumber="phone_number",e))(Cr||{}),Pr=(e=>(e.SmsOtpSent="sms-otp-sent",e.LoginThrottled="login-throttled",e.InvalidSmsOtp="invalid-sms-otp",e.SmsVerified="sms-verified",e.AccountRecovered="account-recovered",e.UpdateEmailRequired="update-email-required",e))(Pr||{}),pe=(e=>(e.Cancel="cancel",e.VerifyOtp="verify-otp-code",e.ResendSms="resend-sms-otp",e.UpdateEmail="update-email",e))(pe||{}),Ue=(e=>(e.Success="nft-checkout-success",e.Failure="nft-checkout-failure",e.Initiated="nft-checkout-initiated",e.Disconnect="disconnect",e))(Ue||{}),Dr=(e=>(e.WalletInfoFetched="Wallet/wallet-info-fetched",e))(Dr||{}),$r=(e=>(e.CloseMagicWindow="close-magic-window",e))($r||{});var Ai=Object.create,$t=Object.defineProperty,Oi=Object.getOwnPropertyDescriptor,Ni=Object.getOwnPropertyNames,Ti=Object.getPrototypeOf,Mi=Object.prototype.hasOwnProperty,Li=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ci=(e,t)=>{for(var r in t)$t(e,r,{get:t[r],enumerable:!0})},Pi=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ni(t))!Mi.call(e,a)&&a!==r&&$t(e,a,{get:()=>t[a],enumerable:!(i=Oi(t,a))||i.enumerable});return e},Di=(e,t,r)=>(r=e!=null?Ai(Ti(e)):{},Pi(t||!e||!e.__esModule?$t(r,"default",{value:e,enumerable:!0}):r,e)),$i=Li((e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function s(v,y,O){this.fn=v,this.context=y,this.once=O||!1}function p(v,y,O,g,N){if(typeof O!="function")throw new TypeError("The listener must be a function");var D=new s(O,g||v,N),F=i?i+y:y;return v._events[F]?v._events[F].fn?v._events[F]=[v._events[F],D]:v._events[F].push(D):(v._events[F]=D,v._eventsCount++),v}function h(v,y){--v._eventsCount===0?v._events=new a:delete v._events[y]}function w(){this._events=new a,this._eventsCount=0}w.prototype.eventNames=function(){var v=[],y,O;if(this._eventsCount===0)return v;for(O in y=this._events)r.call(y,O)&&v.push(i?O.slice(1):O);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(y)):v},w.prototype.listeners=function(v){var y=i?i+v:v,O=this._events[y];if(!O)return[];if(O.fn)return[O.fn];for(var g=0,N=O.length,D=new Array(N);g<N;g++)D[g]=O[g].fn;return D},w.prototype.listenerCount=function(v){var y=i?i+v:v,O=this._events[y];return O?O.fn?1:O.length:0},w.prototype.emit=function(v,y,O,g,N,D){var F=i?i+v:v;if(!this._events[F])return!1;var L=this._events[F],W=arguments.length,J,$;if(L.fn){switch(L.once&&this.removeListener(v,L.fn,void 0,!0),W){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,y),!0;case 3:return L.fn.call(L.context,y,O),!0;case 4:return L.fn.call(L.context,y,O,g),!0;case 5:return L.fn.call(L.context,y,O,g,N),!0;case 6:return L.fn.call(L.context,y,O,g,N,D),!0}for($=1,J=new Array(W-1);$<W;$++)J[$-1]=arguments[$];L.fn.apply(L.context,J)}else{var Re=L.length,ne;for($=0;$<Re;$++)switch(L[$].once&&this.removeListener(v,L[$].fn,void 0,!0),W){case 1:L[$].fn.call(L[$].context);break;case 2:L[$].fn.call(L[$].context,y);break;case 3:L[$].fn.call(L[$].context,y,O);break;case 4:L[$].fn.call(L[$].context,y,O,g);break;default:if(!J)for(ne=1,J=new Array(W-1);ne<W;ne++)J[ne-1]=arguments[ne];L[$].fn.apply(L[$].context,J)}}return!0},w.prototype.on=function(v,y,O){return p(this,v,y,O,!1)},w.prototype.once=function(v,y,O){return p(this,v,y,O,!0)},w.prototype.removeListener=function(v,y,O,g){var N=i?i+v:v;if(!this._events[N])return this;if(!y)return h(this,N),this;var D=this._events[N];if(D.fn)D.fn===y&&(!g||D.once)&&(!O||D.context===O)&&h(this,N);else{for(var F=0,L=[],W=D.length;F<W;F++)(D[F].fn!==y||g&&!D[F].once||O&&D[F].context!==O)&&L.push(D[F]);L.length?this._events[N]=L.length===1?L[0]:L:h(this,N)}return this},w.prototype.removeAllListeners=function(v){var y;return v?(y=i?i+v:v,this._events[y]&&h(this,y)):(this._events=new a,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prefixed=i,w.EventEmitter=w,typeof t<"u"&&(t.exports=w)});function Ui(e){let t={exports:{}};return e(t,t.exports),t.exports}var xi=Number.MAX_SAFE_INTEGER||9007199254740991,Ut={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:xi,MAX_SAFE_COMPONENT_LENGTH:16},Fi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},K=Fi,Ze=Ui(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=Ut,i=(t=e.exports={}).re=[],a=t.src=[],s=t.t={},p=0,h=(w,v,y)=>{let O=p++;K(O,v),s[w]=O,a[O]=v,i[O]=new RegExp(v,y?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","[0-9]+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),h("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER","[0-9A-Za-z-]+"),h("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),h("FULL",`^${a[s.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),h("LOOSE",`^${a[s.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),h("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),h("COERCERTL",a[s.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0.0.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Ur=/^[0-9]+$/,Xr=(e,t)=>{let r=Ur.test(e),i=Ur.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},ki=(e,t)=>Xr(t,e),Wi={compareIdentifiers:Xr,rcompareIdentifiers:ki},{MAX_LENGTH:xr,MAX_SAFE_INTEGER:at}=Ut,{re:Fr,t:kr}=Ze,{compareIdentifiers:Ye}=Wi,Ne=class ye{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof ye){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>xr)throw new TypeError(`version is longer than ${xr} characters`);K("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?Fr[kr.LOOSE]:Fr[kr.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>at||this.major<0)throw new TypeError("Invalid major version");if(this.minor>at||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>at||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let s=+a;if(s>=0&&s<at)return s}return a}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(K("SemVer.compare",this.version,this.options,t),!(t instanceof ye)){if(typeof t=="string"&&t===this.version)return 0;t=new ye(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ye||(t=new ye(t,this.options)),Ye(this.major,t.major)||Ye(this.minor,t.minor)||Ye(this.patch,t.patch)}comparePre(t){if(t instanceof ye||(t=new ye(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],a=t.prerelease[r];if(K("prerelease compare",r,i,a),i===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(i===void 0)return-1;if(i!==a)return Ye(i,a)}while(++r)}compareBuild(t){t instanceof ye||(t=new ye(t,this.options));let r=0;do{let i=this.build[r],a=t.build[r];if(K("prerelease compare",r,i,a),i===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(i===void 0)return-1;if(i!==a)return Ye(i,a)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}},Bi=(e,t,r)=>new Ne(e,r).compare(new Ne(t,r)),Ge=Bi,Gi=(e,t,r)=>Ge(e,t,r)===0,Vi=Gi,ji=(e,t,r)=>Ge(e,t,r)!==0,Hi=ji,qi=(e,t,r)=>Ge(e,t,r)>0,Ki=qi,Yi=(e,t,r)=>Ge(e,t,r)>=0,Xi=Yi,zi=(e,t,r)=>Ge(e,t,r)<0,Ji=zi,Qi=(e,t,r)=>Ge(e,t,r)<=0,Zi=Qi,ea=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Vi(e,r,i);case"!=":return Hi(e,r,i);case">":return Ki(e,r,i);case">=":return Xi(e,r,i);case"<":return Ji(e,r,i);case"<=":return Zi(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}},Lt=ea,Xe=Symbol("SemVer ANY"),Ct=class Pt{static get ANY(){return Xe}constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof Pt){if(t.loose===!!r.loose)return t;t=t.value}K("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Xe?this.value="":this.value=this.operator+this.semver.version,K("comp",this)}parse(t){let r=this.options.loose?Wr[Br.COMPARATORLOOSE]:Wr[Br.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new Ne(i[2],this.options.loose):this.semver=Xe}toString(){return this.value}test(t){if(K("Comparator.test",t,this.options.loose),this.semver===Xe||t===Xe)return!0;if(typeof t=="string")try{t=new Ne(t,this.options)}catch{return!1}return Lt(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof Pt))throw new TypeError("a Comparator is required");if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""||new Dt(t.value,r).test(this.value);if(t.operator==="")return t.value===""||new Dt(this.value,r).test(t.semver);let i=!(this.operator!==">="&&this.operator!==">"||t.operator!==">="&&t.operator!==">"),a=!(this.operator!=="<="&&this.operator!=="<"||t.operator!=="<="&&t.operator!=="<"),s=this.semver.version===t.semver.version,p=!(this.operator!==">="&&this.operator!=="<="||t.operator!==">="&&t.operator!=="<="),h=Lt(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),w=Lt(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return i||a||s&&p||h||w}},{re:Wr,t:Br}=Ze,Dt=class ut{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof ut)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new ut(t.raw,r);if(t instanceof Ct)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let i=r?re[ee.HYPHENRANGELOOSE]:re[ee.HYPHENRANGE];t=t.replace(i,ha(this.options.includePrerelease)),K("hyphen replace",t),t=t.replace(re[ee.COMPARATORTRIM],ta),K("comparator trim",t,re[ee.COMPARATORTRIM]),t=(t=(t=t.replace(re[ee.TILDETRIM],ra)).replace(re[ee.CARETTRIM],na)).split(/\s+/).join(" ");let a=r?re[ee.COMPARATORLOOSE]:re[ee.COMPARATOR];return t.split(" ").map(s=>ia(s,this.options)).join(" ").split(/\s+/).map(s=>fa(s,this.options)).filter(this.options.loose?s=>!!s.match(a):()=>!0).map(s=>new Ct(s,this.options))}intersects(t,r){if(!(t instanceof ut))throw new TypeError("a Range is required");return this.set.some(i=>Gr(i,r)&&t.set.some(a=>Gr(a,r)&&i.every(s=>a.every(p=>s.intersects(p,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Ne(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(ma(this.set[r],t,this.options))return!0;return!1}},{re,t:ee,comparatorTrimReplace:ta,tildeTrimReplace:ra,caretTrimReplace:na}=Ze,Gr=(e,t)=>{let r=!0,i=e.slice(),a=i.pop();for(;r&&i.length;)r=i.every(s=>a.intersects(s,t)),a=i.pop();return r},ia=(e,t)=>(K("comp",e,t),e=sa(e,t),K("caret",e),e=aa(e,t),K("tildes",e),e=la(e,t),K("xrange",e),e=da(e,t),K("stars",e),e),ae=e=>!e||e.toLowerCase()==="x"||e==="*",aa=(e,t)=>e.trim().split(/\s+/).map(r=>oa(r,t)).join(" "),oa=(e,t)=>{let r=t.loose?re[ee.TILDELOOSE]:re[ee.TILDE];return e.replace(r,(i,a,s,p,h)=>{let w;return K("tilde",e,i,a,s,p,h),ae(a)?w="":ae(s)?w=`>=${a}.0.0 <${+a+1}.0.0-0`:ae(p)?w=`>=${a}.${s}.0 <${a}.${+s+1}.0-0`:h?(K("replaceTilde pr",h),w=`>=${a}.${s}.${p}-${h} <${a}.${+s+1}.0-0`):w=`>=${a}.${s}.${p} <${a}.${+s+1}.0-0`,K("tilde return",w),w})},sa=(e,t)=>e.trim().split(/\s+/).map(r=>ca(r,t)).join(" "),ca=(e,t)=>{K("caret",e,t);let r=t.loose?re[ee.CARETLOOSE]:re[ee.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(a,s,p,h,w)=>{let v;return K("caret",e,a,s,p,h,w),ae(s)?v="":ae(p)?v=`>=${s}.0.0${i} <${+s+1}.0.0-0`:ae(h)?v=s==="0"?`>=${s}.${p}.0${i} <${s}.${+p+1}.0-0`:`>=${s}.${p}.0${i} <${+s+1}.0.0-0`:w?(K("replaceCaret pr",w),v=s==="0"?p==="0"?`>=${s}.${p}.${h}-${w} <${s}.${p}.${+h+1}-0`:`>=${s}.${p}.${h}-${w} <${s}.${+p+1}.0-0`:`>=${s}.${p}.${h}-${w} <${+s+1}.0.0-0`):(K("no pr"),v=s==="0"?p==="0"?`>=${s}.${p}.${h}${i} <${s}.${p}.${+h+1}-0`:`>=${s}.${p}.${h}${i} <${s}.${+p+1}.0-0`:`>=${s}.${p}.${h} <${+s+1}.0.0-0`),K("caret return",v),v})},la=(e,t)=>(K("replaceXRanges",e,t),e.split(/\s+/).map(r=>ua(r,t)).join(" ")),ua=(e,t)=>{e=e.trim();let r=t.loose?re[ee.XRANGELOOSE]:re[ee.XRANGE];return e.replace(r,(i,a,s,p,h,w)=>{K("xRange",e,i,a,s,p,h,w);let v=ae(s),y=v||ae(p),O=y||ae(h),g=O;return a==="="&&g&&(a=""),w=t.includePrerelease?"-0":"",v?i=a===">"||a==="<"?"<0.0.0-0":"*":a&&g?(y&&(p=0),h=0,a===">"?(a=">=",y?(s=+s+1,p=0,h=0):(p=+p+1,h=0)):a==="<="&&(a="<",y?s=+s+1:p=+p+1),a==="<"&&(w="-0"),i=`${a+s}.${p}.${h}${w}`):y?i=`>=${s}.0.0${w} <${+s+1}.0.0-0`:O&&(i=`>=${s}.${p}.0${w} <${s}.${+p+1}.0-0`),K("xRange return",i),i})},da=(e,t)=>(K("replaceStars",e,t),e.trim().replace(re[ee.STAR],"")),fa=(e,t)=>(K("replaceGTE0",e,t),e.trim().replace(re[t.includePrerelease?ee.GTE0PRE:ee.GTE0],"")),ha=e=>(t,r,i,a,s,p,h,w,v,y,O,g,N)=>`${r=ae(i)?"":ae(a)?`>=${i}.0.0${e?"-0":""}`:ae(s)?`>=${i}.${a}.0${e?"-0":""}`:p?`>=${r}`:`>=${r}${e?"-0":""}`} ${w=ae(v)?"":ae(y)?`<${+v+1}.0.0-0`:ae(O)?`<${v}.${+y+1}.0-0`:g?`<=${v}.${y}.${O}-${g}`:e?`<${v}.${y}.${+O+1}-0`:`<=${w}`}`.trim(),ma=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(K(e[i].semver),e[i].semver!==Ct.ANY&&e[i].semver.prerelease.length>0){let a=e[i].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0},pa=(e,t,r)=>{try{t=new Dt(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:va}=Ut,{re:Vr,t:jr}=Ze,ya=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ne)return e;if(typeof e!="string"||e.length>va||!(t.loose?Vr[jr.LOOSE]:Vr[jr.FULL]).test(e))return null;try{return new Ne(e,t)}catch{return null}},Ea=ya,{re:ot,t:st}=Ze,ga=(e,t)=>{if(e instanceof Ne)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let i;for(;(i=ot[st.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),ot[st.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;ot[st.COERCERTL].lastIndex=-1}else r=e.match(ot[st.COERCE]);return r===null?null:Ea(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function _a(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Ia(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function wa(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,_a))}function Ra(e){return decodeURIComponent(Array.from(atob(e),Ia).join(""))}function zr(e){return wa(JSON.stringify(e))}function ba(e){return JSON.parse(Ra(e))}function ze(e){return typeof e>"u"}function Sa(e){return e===null}function Jr(e){return Sa(e)||ze(e)}function Aa(e){return Jr(e)?!1:!ze(e.jsonrpc)&&!ze(e.id)&&(!ze(e.result)||!ze(e.error))}function Oa(e){return Jr(e)?!1:typeof e=="number"&&Object.values(Ae).includes(e)}function ft(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var Y={};function Qr(e,t){return Object.assign(Y,t),e}var Na={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Te=class Zr extends Error{constructor(t,r){super(`Magic SDK Error: [${t}] ${r}`),this.code=t,this.rawMessage=r,Object.setPrototypeOf(this,Zr.prototype)}__proto__=Error},Je=class en extends Error{__proto__=Error;code;rawMessage;data;constructor(t){super();let r=Number(t?.code);this.rawMessage=t?.message||"Internal error",this.code=Oa(r)?r:Ae.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=t?.data||void 0,Object.setPrototypeOf(this,en.prototype)}},xe=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}message;log(){console.warn(this.message)}},xt=class tn extends Error{constructor(t,r,i,a){super(`Magic Extension Error (${t.name}): [${r}] ${i}`),this.code=r,this.rawMessage=i,this.data=a,Object.setPrototypeOf(this,tn.prototype)}__proto__=Error},ht=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}message;log(){console.warn(this.message)}};function Ta(){return new Te(ge.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Ft(){return new Te(ge.ModalNotReady,"Modal is not ready")}function Ma(){return new Te(ge.MalformedResponse,"Response from the Magic iframe is malformed.")}function La(e){return new Te(ge.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Ca(e){let t=`Some extensions are incompatible with \`${Y.sdkName}@${Y.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let i=r.compat[Y.sdkName];typeof i=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${i}\``:i||(t+=`
  - Extension \`${r.name}\` does not support ${Y.platform} environments.`)}),new Te(ge.IncompatibleExtensions,t)}function Pa(e){let t=r=>{let i=r+1,a=i%10,s=i%100;return a===1&&s!==11?`${i}st`:a===2&&s!==12?`${i}nd`:a===3&&s!==13?`${i}rd`:`${i}th`};return new Te(ge.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function rn(){return new xe(_e.DuplicateIframe,"Duplicate iframes found.")}function Da(){return new xe(_e.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function $a(){return new xe(_e.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${Y.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function Ua(e){let{method:t,removalVersions:r,useInstead:i}=e,a=r[Y.sdkName],s=i?` Use \`${i}\` instead.`:"",p=`\`${t}\` will be removed from \`${Y.sdkName}\` in version \`${a}\`.${s}`;return new xe(_e.DeprecationNotice,p)}function*xa(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Fa=xa();function nn(){return Fa.next().value}var an={};Ci(an,{clear:()=>ka,getItem:()=>fe,iterate:()=>on,key:()=>Ba,keys:()=>Ga,length:()=>Wa,removeItem:()=>Be,setItem:()=>Oe});var ct;function Me(e){return async(...t)=>(ct||(ct=await Y.configureStorage()),await ct.ready(),ct[e](...t))}var fe=Me("getItem"),Oe=Me("setItem"),Be=Me("removeItem"),ka=Me("clear"),Wa=Me("length"),Ba=Me("key"),Ga=Me("keys"),on=Me("iterate");function Va(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var kt="STORE_KEY_PRIVATE_KEY",mt="STORE_KEY_PUBLIC_JWK",sn="ECDSA",ja="P-256",Ha={name:sn,namedCurve:ja};function yt(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function qa(){Be(mt),Be(kt)}async function Ka(){let e=await Ya();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=await fe(kt);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let i={iat:Math.floor(new Date().getTime()/1e3),jti:Va()},a={protected:Hr(JSON.stringify({typ:"dpop+jwt",alg:"ES256",jwk:e})),claims:Hr(JSON.stringify(i))},s=za(`${a.protected}.${a.claims}`),p={name:sn,hash:{name:"SHA-256"}},h=Qa(new Uint8Array(await t.sign(p,r,s)));return`${a.protected}.${a.claims}.${h}`}async function Ya(){if(!yt()){console.info("webcrypto is not supported");return}return await fe(mt)||await Xa(),fe(mt)}async function Xa(){let{subtle:e}=window.crypto,t=await e.generateKey(Ha,!1,["sign"]),r=await e.exportKey("jwk",t.publicKey);await Oe(kt,t.privateKey),await Oe(mt,r)}function Hr(e){return cn(Ja(e))}function za(e){return new TextEncoder().encode(e)}function cn(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Ja(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function Qa(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),cn(t)}var ln=Symbol("Payload pre-processed by Magic SDK");function un(e){return Object.defineProperty(e,ln,{value:!0,enumerable:!1}),e}function Za(e){return!!e[ln]}function pt(e){return Za(e)||(e.jsonrpc=e.jsonrpc??"2.0",e.id=nn(),e.method=e.method??"noop",e.params=e.params??[],un(e)),e}function G(e,t=[]){return un({params:t,method:e,jsonrpc:"2.0",id:nn()})}var dn=class fn{_jsonrpc;_id;_result;_error;constructor(t){t instanceof fn?(this._jsonrpc=t.payload.jsonrpc,this._id=t.payload.id,this._result=t.payload.result,this._error=t.payload.error):Aa(t)?(this._jsonrpc=t.jsonrpc,this._id=t.id,this._result=t.result,this._error=t.error):(this._jsonrpc=t.jsonrpc,this._id=t.id,this._result=void 0,this._error=void 0)}applyError(t){return this._error=t,this}applyResult(t){return this._result=t,this}get hasError(){return this._error?.code===Ae.DpopInvalidated&&qa(),typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},eo=Di($i()),to=class extends eo.default{};function hn(){let e=new to;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...i)=>(e[t].apply(e,i),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var mn=Symbol("isPromiEvent");function Wt(e){return!!e[mn]}function Ee(e){let t=pn(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:i}=hn(),a=Symbol("Promise.then"),s=Symbol("Promise.catch"),p=Symbol("Promise.finally"),h=(y,O)=>(...g)=>{let N=O[y].apply(O,g);return w(N)},w=y=>Object.assign(y,{[mn]:!0,[a]:y[a]||y.then,[s]:y[s]||y.catch,[p]:y[p]||y.finally,then:h(a,y),catch:h(s,y),finally:h(p,y),on:i("on",y),once:i("once",y),addListener:i("addListener",y),off:i("off",y),removeListener:i("removeListener",y),removeAllListeners:i("removeAllListeners",y),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),v=w(t.then(y=>(v.emit("done",y),v.emit("settled"),y),y=>{throw v.emit("error",y),v.emit("settled"),y}));return v.on(it.ClosedByUser,()=>{v.emit(nt.ClosedByUser)}),v}function pn(e){return new Promise((t,r)=>{let i=e(t,r);Promise.resolve(i).catch(r)})}var Le=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){if(this.sdk.thirdPartyWallets.isConnected&&!Mt.includes(e.method))return Ee((a,s)=>{this.sdk.thirdPartyWallets.requestOverride(e).then(a).catch(s)});let t=this.overlay.post(Ie.MAGIC_HANDLE_REQUEST,pt(e)),r=Ee((a,s)=>{t.then(p=>{if(i(),p.hasError)s(new Je(p.payload.error));else if(p.hasResult)a(p.payload.result);else throw Ma()}).catch(p=>{i(),s(p)})}),i=this.overlay.on(de.MAGIC_HANDLE_EVENT,a=>{let{response:s}=a.data;if(s.id===e.id&&s.result?.event){let{event:p,params:h=[]}=s.result;r.emit(p,...h)}});return r}createIntermediaryEvent(e,t){return r=>{let i=G(M.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(i)}}};function ro(e,t){let[r]=e.split(".").map(Number);return r>=t}var no={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},io=class extends Le{loginWithMagicLink(e){let t=Y.sdkName==="@magic-sdk/react-native"||Y.sdkName==="@magic-sdk/react-native-bare"||Y.sdkName==="@magic-sdk/react-native-expo";if(t&&ro(Y.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&Ua({method:"auth.loginWithMagicLink()",removalVersions:no,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:r,showUI:i=!0,redirectURI:a,overrides:s,lifespan:p}=e,h=G(this.sdk.testMode?M.LoginWithMagicLinkTestMode:M.LoginWithMagicLink,[{email:r,showUI:i,redirectURI:a,overrides:s,lifespan:p}]);return this.request(h)}loginWithSMS(e){let{phoneNumber:t,showUI:r=!0,lifespan:i}=e,a=G(this.sdk.testMode?M.LoginWithSmsTestMode:M.LoginWithSms,[{phoneNumber:t,showUI:r,lifespan:i}]),s=this.request(a);return!r&&s&&(s.on(De.VerifySmsOtp,p=>{this.createIntermediaryEvent(De.VerifySmsOtp,a.id)(p)}),s.on(De.Cancel,()=>{this.createIntermediaryEvent(De.Cancel,a.id)()})),s}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:i,overrides:a,lifespan:s}=e,p=G(this.sdk.testMode?M.LoginWithEmailOTPTestMode:M.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:i,overrides:a,lifespan:s}]),h=this.request(p);return!i&&h&&h.on(Ke.Retry,()=>{this.createIntermediaryEvent(Ke.Retry,p.id)()}),!r&&h&&(h.on(le.VerifyEmailOtp,w=>{this.createIntermediaryEvent(le.VerifyEmailOtp,p.id)(w)}),h.on(le.VerifyMFACode,w=>{this.createIntermediaryEvent(le.VerifyMFACode,p.id)(w)}),h.on(le.LostDevice,()=>{this.createIntermediaryEvent(le.LostDevice,p.id)()}),h.on(le.VerifyRecoveryCode,w=>{this.createIntermediaryEvent(le.VerifyRecoveryCode,p.id)(w)}),h.on(le.Cancel,()=>{this.createIntermediaryEvent(le.Cancel,p.id)()})),h}loginWithCredential(e){let{credentialOrQueryString:t,lifespan:r}=e||{},i=t??"";if(!t&&Y.platform==="web"){i=window.location.search;let s=window.location.origin+window.location.pathname;window.history.replaceState(null,"",s)}let a=G(this.sdk.testMode?M.LoginWithCredentialTestMode:M.LoginWithCredential,[i,r]);return this.request(a)}setAuthorizationToken(e){let t=G(M.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:r=!0}=e,i=G(this.sdk.testMode?M.UpdateEmailTestMode:M.UpdateEmail,[{email:t,showUI:r}]),a=this.request(i);return r||(a.on(ce.Retry,()=>{this.createIntermediaryEvent(ce.Retry,i.id)()}),a.on(ce.Cancel,()=>{this.createIntermediaryEvent(ce.Cancel,i.id)()}),a.on(ce.VerifyEmailOtp,s=>{this.createIntermediaryEvent(ce.VerifyEmailOtp,i.id)(s)}),a.on(ce.VerifyMFACode,s=>{this.createIntermediaryEvent(ce.VerifyMFACode,i.id)(s)}),a.on(te.RetryWithNewEmail,s=>{this.createIntermediaryEvent(te.RetryWithNewEmail,i.id)(s)}),a.on(te.Cancel,()=>{this.createIntermediaryEvent(te.Cancel,i.id)()}),a.on(te.VerifyEmailOtp,s=>{this.createIntermediaryEvent(te.VerifyEmailOtp,i.id)(s)})),a}},Bt="ds",Gt="ek",Vt="iv",jt="AES-GCM",ao=256;async function vn(){let e=[];await on((t,r,i)=>{r.startsWith(`${Bt}_`)&&e.push(r)});for(let t of e)await Be(t)}function yn(e){let t="",r=new Uint8Array(e),i=r.byteLength;for(let a=0;a<i;a++)t+=String.fromCharCode(r[a]);return window.btoa(t)}function En(e){let t=window.atob(e),r=t.length,i=new Uint8Array(r);for(let a=0;a<r;a++)i[a]=t.charCodeAt(a);return i.buffer}async function oo(){if(!yt()){console.info("webcrypto is not supported");return}let{crypto:e}=window;return await fe(Vt)||e.getRandomValues(new Uint8Array(12))}async function so(){if(!yt()){console.info("webcrypto is not supported");return}let{subtle:e}=window.crypto;return await fe(Gt)||await e.generateKey({name:jt,length:ao},!1,["encrypt","decrypt"])}async function co(e,t){let r=await oo(),i=await so();if(!r||!i||!e)return;let a=En(e),{subtle:s}=window.crypto,p=await s.encrypt({name:jt,iv:r},i,a),h=yn(p);await Oe(`${Bt}_${t}`,h),await Oe(Gt,i),await Oe(Vt,r)}async function lo(e){let t=await fe(`${Bt}_${e}`),r=await fe(Vt),i=await fe(Gt);if(!r||!t||!i||!yt())return;let{subtle:a}=window.crypto,s=await a.decrypt({name:jt,iv:r},i,En(t));return yn(s)}function Qe(e,t){return t?new URL(e,t):new URL(e)}var uo=class extends Le{getIdToken(e){let t=G(this.sdk.testMode?M.GetIdTokenTestMode:M.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=G(this.sdk.testMode?M.GenerateIdTokenTestMode:M.GenerateIdToken,[e]);return this.request(t)}getInfo(){let e=G(M.GetInfo,[]);return this.request(e)}isLoggedIn(){return Ee(async(e,t)=>{try{let r=!1;this.sdk.useStorageCache&&(r=await fe(this.localForageIsLoggedInKey)==="true",r&&e(!0));let i=G(this.sdk.testMode?M.IsLoggedInTestMode:M.IsLoggedIn),a=await this.request(i);this.sdk.useStorageCache&&(a?Oe(this.localForageIsLoggedInKey,!0):Be(this.localForageIsLoggedInKey),r&&!a&&this.emitUserLoggedOut(!0)),e(a)}catch(r){t(r)}})}logout(){return Be(this.localForageIsLoggedInKey),vn(),Ee(async(e,t)=>{try{let r=G(this.sdk.testMode?M.LogoutTestMode:M.Logout),i=await this.request(r);this.sdk.useStorageCache&&this.emitUserLoggedOut(i),e(i)}catch(r){t(r)}})}requestInfoWithUI(e){let t=G(M.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let{showUI:t=!0}=e||{},r=G(this.sdk.testMode?M.UserSettingsTestMode:M.UserSettings,[e]),i=this.request(r);return!t&&i&&(i.on(me.SendNewPhoneNumber,a=>{this.createIntermediaryEvent(me.SendNewPhoneNumber,r.id)(a)}),i.on(me.SendOtpCode,a=>{this.createIntermediaryEvent(me.SendOtpCode,r.id)(a)}),i.on(me.StartEditPhoneNumber,()=>{this.createIntermediaryEvent(me.StartEditPhoneNumber,r.id)()}),i.on(me.Cancel,()=>{this.createIntermediaryEvent(me.Cancel,r.id)()}),i.on(ce.VerifyEmailOtp,a=>{this.createIntermediaryEvent(ce.VerifyEmailOtp,r.id)(a)})),i}recoverAccount(e){let{email:t,showUI:r}=e,i=G(this.sdk.testMode?M.RecoverAccountTestMode:M.RecoverAccount,[{email:t,showUI:r}]),a=this.request(i);return!r&&a&&(a.on(pe.Cancel,()=>{this.createIntermediaryEvent(pe.Cancel,i.id)()}),a.on(pe.ResendSms,()=>{this.createIntermediaryEvent(pe.ResendSms,i.id)()}),a.on(pe.VerifyOtp,s=>{this.createIntermediaryEvent(pe.VerifyOtp,i.id)(s)}),a.on(pe.UpdateEmail,s=>{this.createIntermediaryEvent(pe.UpdateEmail,i.id)(s)}),a.on(te.Cancel,()=>{this.createIntermediaryEvent(te.Cancel,i.id)()}),a.on(te.RetryWithNewEmail,s=>{this.createIntermediaryEvent(te.RetryWithNewEmail,i.id)(s)}),a.on(te.VerifyEmailOtp,s=>{this.createIntermediaryEvent(te.VerifyEmailOtp,i.id)(s)})),a}revealPrivateKey(){let e=G(M.RevealPK);return this.request(e)}onUserLoggedOut(e){this.userLoggedOutCallbacks.push(e)}enableMFA(e){let{showUI:t=!0}=e,r=G(M.EnableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on($e.VerifyMFACode,a=>{this.createIntermediaryEvent($e.VerifyMFACode,r.id)(a)}),i.on($e.Cancel,()=>{this.createIntermediaryEvent($e.Cancel,r.id)()})),i}disableMFA(e){let{showUI:t=!0}=e,r=G(M.DisableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on(we.VerifyMFACode,a=>{this.createIntermediaryEvent(we.VerifyMFACode,r.id)(a)}),i.on(we.LostDevice,a=>{this.createIntermediaryEvent(we.LostDevice,r.id)(a)}),i.on(we.Cancel,()=>{this.createIntermediaryEvent(we.Cancel,r.id)()})),i}emitUserLoggedOut(e){this.userLoggedOutCallbacks.forEach(t=>{t(e)})}localForageIsLoggedInKey="magic_auth_is_logged_in";userLoggedOutCallbacks=[]},fo=class extends Le{connectWithUI(e){let t=Ee(async(r,i)=>{try{let a=G(M.Login,[{enabledWallets:this.sdk.thirdPartyWallets.enabledWallets,...e}]),s=this.request(a);this.sdk.thirdPartyWallets.eventListeners.forEach(({event:h,callback:w})=>{s.on(h,()=>w(a.id))}),s.on("id-token-created",h=>{t.emit("id-token-created",h)});let p=await s;p.error&&i(p),r(p)}catch(a){i(a)}});return t}showUI(e){return this.request(G(M.ShowUI,[e]))}showAddress(){return this.request(G(M.ShowAddress))}showSendTokensUI(){return this.request(G(M.ShowSendTokensUI))}showOnRamp(){return this.request(G(M.ShowOnRamp))}showNFTs(){return this.request(G(M.ShowNFTs))}showBalances(){return this.request(G(M.ShowBalances))}sendGaslessTransaction(e,t){return this.request(G(M.SendGaslessTransaction,[e,t]))}},ho=class extends Le{eventListeners=[];enabledWallets={};isConnected=!1;resetThirdPartyWalletState(){localStorage.removeItem(ve.PROVIDER),localStorage.removeItem(ve.ADDRESS),localStorage.removeItem(ve.CHAIN_ID),this.isConnected=!1}requestOverride(e){if(e.method===M.Login)return this.resetThirdPartyWalletState(),super.request(e);if(e.method===M.GetInfo)return this.getInfo(e);if(e.method===M.IsLoggedIn)return this.isLoggedIn(e);if(e.method===M.Logout)return this.logout(e);switch(localStorage.getItem(ve.PROVIDER)){case"web3modal":return this.web3modalRequest(e);default:return this.resetThirdPartyWalletState(),super.request(e)}}isLoggedIn(e){switch(localStorage.getItem(ve.PROVIDER)){case"web3modal":return this.web3modalIsLoggedIn();default:return this.resetThirdPartyWalletState(),super.request(e)}}getInfo(e){switch(localStorage.getItem(ve.PROVIDER)){case"web3modal":return this.web3modalGetInfo();default:return this.resetThirdPartyWalletState(),super.request(e)}}logout(e){let t=localStorage.getItem(ve.PROVIDER);switch(this.resetThirdPartyWalletState(),t){case"web3modal":return this.web3modalLogout();default:return super.request(e)}}web3modalRequest(e){return Ee((t,r)=>{this.sdk.web3modal.modal.getWalletProvider().request(e).then(t).catch(r)})}web3modalIsLoggedIn(){return Ee(e=>{let t=this.sdk.web3modal.modal.getStatus();if(t==="connected"&&e(!0),t==="disconnected"&&(this.resetThirdPartyWalletState(),e(!1)),t==="reconnecting"){let r=this.sdk.web3modal.modal.subscribeProvider(({status:i})=>{i==="connected"&&(r(),e(!0)),i==="disconnected"&&(r(),this.resetThirdPartyWalletState(),e(!1))})}})}formatWeb3modalGetInfoResponse(){let e=this.sdk.web3modal.modal.getWalletInfo()?.name,t=this.sdk.web3modal.modal.getAddress();return{publicAddress:t,email:null,issuer:`did:ethr:${t}`,phoneNumber:null,isMfaEnabled:!1,recoveryFactors:[],walletType:e||"web3modal"}}web3modalGetInfo(){return Ee((e,t)=>{let r=this.sdk.web3modal.modal.getStatus();if(r==="connected"&&e(this.formatWeb3modalGetInfoResponse()),r==="disconnected"&&(this.resetThirdPartyWalletState(),t("Magic RPC Error: [-32603] Internal error: User denied account access.")),r==="reconnecting"){let i=this.sdk.web3modal.modal.subscribeProvider(({status:a})=>{a==="connected"&&(i(),e(this.formatWeb3modalGetInfoResponse())),a==="disconnected"&&(i(),this.resetThirdPartyWalletState(),t("Magic RPC Error: [-32603] Internal error: User denied account access."))})}})}web3modalLogout(){return Ee(async e=>{try{await this.sdk.web3modal.modal.disconnect()}catch(t){console.error(t)}e(!0)})}},{createBoundEmitterMethod:lt,createChainingEmitterMethod:We}=hn(),mo=class extends Le{isMagic=!0;sendAsync(e,t){if(!t)throw Pa({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ie.MAGIC_HANDLE_REQUEST,e.map(r=>{let i=pt(r);return this.prefixPayloadMethodForTestMode(i),i})).then(r=>{t(null,r.map(i=>({...i.payload,error:i.hasError?new Je(i.payload.error):null})))});else{let r=pt(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(Ie.MAGIC_HANDLE_REQUEST,r).then(i=>{t(i.hasError?new Je(i.payload.error):null,i.payload)})}}send(e,t){if(typeof e=="string"){let i=G(e,Array.isArray(t)?t:[]);return this.request(i)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let r=Da();return r.log(),new dn(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=G(M.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}on=We("on",this);once=We("once",this);addListener=We("addListener",this);off=We("off",this);removeListener=We("removeListener",this);removeAllListeners=We("removeAllListeners",this);emit=lt("emit");eventNames=lt("eventNames");listeners=lt("listeners");listenerCount=lt("listenerCount")},qr=["request","overlay","sdk"];function po(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Le.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var vo=class extends Le{compat;__sdk_access_field_descriptors__=new Map;__is_initialized__=!1;utils={createPromiEvent:Ee,isPromiEvent:Wt,encodeJSON:zr,decodeJSON:ba,createJsonRpcRequestPayload:G,standardizeJsonRpcRequestPayload:pt,storage:an};constructor(){super(void 0);let e=[this,...po(this)];qr.forEach(t=>{let r=e.map(p=>Object.getOwnPropertyDescriptor(p,t)),i=r.findIndex(p=>!!p),a=i>0,s=r[i];s&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:s,isPrototypeField:a}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw La(t)}}))})}init(e){this.__is_initialized__||(qr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:i}=this.__sdk_access_field_descriptors__.get(t);i?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:i}=e,a=i?` Use \`${i}\` instead.`:"",s=`\`${t}\` will be removed from this Extension in version \`${r}\`.${a}`;return new ht(this,"DEPRECATION_NOTICE",s)}createWarning(e,t){return new ht(this,e,t)}createError(e,t,r){return new xt(this,e,t,r)}},yo=class extends vo{},vt=class{static Internal=yo},Eo=class extends Le{purchase(e){let t=G(M.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=this.sdk.thirdPartyWallets.isConnected,r=G(M.NFTCheckout,[{...e,walletProvider:t?"web3modal":"magic"}]),i=this.request(r);return t&&(i.on(Ue.Initiated,async a=>{try{let s=await this.request({method:"eth_sendTransaction",params:[a]});this.createIntermediaryEvent(Ue.Success,r.id)(s)}catch{this.createIntermediaryEvent(Ue.Failure,r.id)()}}),i.on(Ue.Disconnect,()=>{this.sdk.thirdPartyWallets.resetThirdPartyWalletState(),i.emit("disconnect")})),i}transfer(e){let t=G(M.NFTTransfer,[e]);return this.request(t)}};function Kr(e){return e.compat&&e.compat[Y.sdkName]!=null?typeof e.compat[Y.sdkName]=="string"?pa(ga(Y.version),e.compat[Y.sdkName]):!!e.compat[Y.sdkName]:!0}function go(e,t,r){return!t&&!r?`${e}_eth_mainnet`:r?`${e}_${JSON.stringify(r)}`:t?typeof t=="string"?`${e}_eth_${t}`:`${e}_${t.rpcUrl}_${t.chainId}_${t.chainType}`:`${e}_unknown`}function _o(e){let t=e?.extensions??[],r={},i=[];if(Array.isArray(t)?t.forEach(a=>{Kr(a)?(a.init(this),a.name&&(this[a.name]=a),a instanceof vt.Internal&&(ft(a.config)||(r[a.name]=a.config))):i.push(a)}):Object.keys(t).forEach(a=>{if(Kr(t[a])){t[a].init(this);let s=t[a];this[a]=s,s instanceof vt.Internal&&(ft(s.config)||(r[t[a].name]=s.config))}else i.push(t[a])}),i.length)throw Ca(i);return r}var gn=class dt{constructor(t,r){if(this.apiKey=t,!t)throw Ta();Y.platform==="react-native"&&r?.endpoint&&$a().log();let{defaultEndpoint:i,version:a}=Y;this.testMode=!!r?.testMode,this.useStorageCache=!!r?.useStorageCache,this.endpoint=Qe(r?.endpoint??i).origin,this.auth=new io(this),this.user=new uo(this),this.wallet=new fo(this),this.nft=new Eo(this),this.thirdPartyWallets=new ho(this),this.rpcProvider=new mo(this);let s=_o.call(this,r);this.parameters=zr({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:r?.network,host:Qe(this.endpoint).host,sdk:Na[Y.sdkName],version:a,ext:ft(s)?void 0:s,locale:r?.locale||"en_US",...Y.bundleId?{bundleId:Y.bundleId}:{},meta:r?.meta}),this.networkHash=go(this.apiKey,r?.network,ft(s)?void 0:s),r?.deferPreload||this.preload()}static __overlays__=new Map;endpoint;parameters;networkHash;testMode;useStorageCache;auth;user;wallet;nft;thirdPartyWallets;rpcProvider;get overlay(){if(!dt.__overlays__.has(this.parameters)){let t=new Y.ViewController(this.endpoint,this.parameters,this.networkHash);t.init(),dt.__overlays__.set(this.parameters,t)}return dt.__overlays__.get(this.parameters)}async preload(){await this.overlay.waitForReady()}};function Io(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function wo(e,t){let r=t.data.response?.id,i=Io(e,r);if(r&&i){let a=new dn(i).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:r,response:a}}return{}}async function Ro(e,t,r){let i=await fe("rt"),a;if(Y.platform==="web")try{a=await fe("jwt")??await Ka()}catch(h){console.error("webcrypto error",h)}let s={msgType:e,payload:t};a&&(s.jwt=a),a&&i&&(s.rt=i);let p=await lo(r);return p&&(s.deviceShare=p),s}async function bo(e){e.data.rt&&await Oe("rt",e.data.rt)}function So(e,t){let r=null;return function(...i){r&&clearTimeout(r),r=setTimeout(()=>{e(...i)},t)}}var Ao=1e3,_n=60*Ao,Yr=5*_n,Oo=60*_n,In=class{constructor(e,t,r){this.endpoint=e,this.parameters=t,this.networkHash=r,this.listen()}isReadyForRequest=!1;messageHandlers=new Set;isConnectedToInternet=!0;lastPongTime=null;heartbeatIntervalTimer=null;heartbeatDebounce=So(()=>{this.endpoint==="https://auth.magic.link/"&&this.heartBeatCheck()},Oo);async post(e,t){return pn(async(r,i)=>{if(!this.isConnectedToInternet){let v=Ft();i(v)}await this.checkRelayerExistsInDOM()||(this.isReadyForRequest=!1,await this.reloadRelayer()),this.isReadyForRequest||await this.waitForReady();let a=[],s=Array.isArray(t)?t.map(v=>v.id):[],p=await Ro(`${e}-${this.parameters}`,t,this.networkHash);await this._post(p);let h=v=>y=>{let{id:O,response:g}=wo(t,y);if(bo(y),g?.payload.error?.message==="User denied account access.")vn();else if(y.data.deviceShare){let{deviceShare:N}=y.data;co(N,this.networkHash)}O&&g&&Array.isArray(t)&&s.includes(O)?(a.push(g),a.length===t.length&&(v(),r(a))):O&&g&&!Array.isArray(t)&&O===t.id&&(v(),r(g))},w=this.on(de.MAGIC_HANDLE_RESPONSE,h(()=>w()))})}on(e,t){let r=t.bind(window),i=a=>{a.data.msgType===`${e}-${this.parameters}`&&r(a)};return this.messageHandlers.add(i),()=>this.messageHandlers.delete(i)}waitForReady(){return new Promise(e=>{let t=this.on(de.MAGIC_OVERLAY_READY,()=>{this.isReadyForRequest=!0,e(),t()})})}listen(){this.on(de.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(de.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()}),this.on(de.MAGIC_SEND_PRODUCT_ANNOUNCEMENT,e=>{e.data.response.result.product_announcement&&new xe(_e.ProductAnnouncement,e.data.response.result.product_announcement).log()})}heartBeatCheck(){let e=!0,t=async()=>{let r={msgType:`${Ie.MAGIC_PING}-${this.parameters}`,payload:[]};await this._post(r)};this.heartbeatIntervalTimer=setInterval(async()=>{if(this.lastPongTime){if(Date.now()-this.lastPongTime>Yr*2){this.reloadRelayer(),e=!0;return}}else if(!e){this.reloadRelayer(),e=!0;return}await t(),e=!1},Yr)}stopHeartBeat(){this.heartbeatDebounce(),this.lastPongTime=null,this.heartbeatIntervalTimer&&(clearInterval(this.heartbeatIntervalTimer),this.heartbeatIntervalTimer=null)}};var Ht={};mr(Ht,{AuthEventOnReceived:()=>Ar,DeepLinkPage:()=>Er,DeviceVerificationEventEmit:()=>Ke,DeviceVerificationEventOnReceived:()=>Rr,DisableMFAEventEmit:()=>we,DisableMFAEventOnReceived:()=>Tr,EnableMFAEventEmit:()=>$e,EnableMFAEventOnReceived:()=>Nr,EthChainType:()=>Mr,Extension:()=>vt,ExtensionError:()=>xt,ExtensionWarning:()=>ht,FarcasterLoginEventEmit:()=>Or,LocalStorageKeys:()=>ve,LoginWithEmailOTPEventEmit:()=>le,LoginWithEmailOTPEventOnReceived:()=>wr,LoginWithMagicLinkEventEmit:()=>gr,LoginWithMagicLinkEventOnReceived:()=>_r,LoginWithSmsOTPEventEmit:()=>De,LoginWithSmsOTPEventOnReceived:()=>Ir,MagicIncomingWindowMessage:()=>de,MagicOutgoingWindowMessage:()=>Ie,MagicPayloadMethod:()=>M,NftCheckoutIntermediaryEvents:()=>Ue,RPCError:()=>Je,RPCErrorCode:()=>Ae,RecencyCheckEventEmit:()=>ce,RecencyCheckEventOnReceived:()=>br,RecoverAccountEventEmit:()=>pe,RecoverAccountEventOnReceived:()=>Pr,RecoveryFactorEventEmit:()=>me,RecoveryFactorEventOnReceived:()=>Lr,RecoveryMethodType:()=>Cr,SDKError:()=>Te,SDKErrorCode:()=>ge,SDKWarning:()=>xe,SDKWarningCode:()=>_e,ThirdPartyWalletEvents:()=>yr,UiEventsEmit:()=>$r,UpdateEmailEventEmit:()=>te,UpdateEmailEventOnReceived:()=>Sr,UserEventsEmit:()=>nt,UserEventsOnReceived:()=>it,WalletEventOnReceived:()=>Dr,isPromiEvent:()=>Wt,routeToMagicMethods:()=>Mt});var _t=vr(Rn()),Kt=vr(Sn());var No={display:"block",visibility:"hidden",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",opacity:"0",zIndex:"-1"};function To(e){for(let[t,r]of Object.entries(No))e.style[t]=r}function Mo(e){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(r=>r.src.includes(e))}var gt=class extends In{activeElement=null;iframe;relayerSrc=Qe(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href;init(){this.test="hello",this.iframe=new Promise(t=>{let r=()=>{if(Mo(encodeURIComponent(this.parameters)))rn().log();else{let i=document.createElement("iframe");i.classList.add("magic-iframe"),i.dataset.magicIframeLabel=Qe(this.endpoint).host,i.title="Secure Modal",i.src=this.relayerSrc,i.allow="clipboard-read; clipboard-write",To(i),document.body.appendChild(i),t(i)}};["loaded","interactive","complete"].includes(document.readyState)?r():window.addEventListener("load",r,!1)}),this.iframe.then(t=>{t instanceof HTMLIFrameElement&&t.addEventListener("load",async()=>{this.heartbeatDebounce()})}),window.addEventListener("message",t=>{if(t.origin===this.endpoint&&t.data.msgType&&(t.data.msgType.includes(de.MAGIC_PONG)&&(this.lastPongTime=Date.now()),t.data&&this.messageHandlers.size)){t.data.response=t.data.response??{},this.stopHeartBeat();for(let r of this.messageHandlers.values())r(t)}}),window.addEventListener("beforeunload",()=>{this.stopHeartBeat()})}async showOverlay(){let t=await this.iframe;t.style.visibility="visible",t.style.zIndex="2147483647",t.style.opacity="1",this.activeElement=document.activeElement,t.focus()}async hideOverlay(){let t=await this.iframe;t.style.visibility="hidden",t.style.zIndex="-1",t.style.opacity="0",this.activeElement?.focus&&this.activeElement.focus(),this.activeElement=null}async _post(t){let r=await this.iframe;if(r&&r.contentWindow)r.contentWindow.postMessage(t,this.endpoint);else throw Ft()}async checkRelayerExistsInDOM(){let t=await this.iframe;return!t||!t.contentWindow?!1:!![].slice.call(document.querySelectorAll(".magic-iframe")).find(i=>i.src.includes(encodeURIComponent(this.parameters)))}async reloadRelayer(){let t=await this.iframe;if(this.stopHeartBeat(),!t){this.init(),console.warn("Magic SDK: Modal lost, re-initiating");return}if(!t.contentWindow){document.body.appendChild(t),console.warn("Magic SDK: Modal did not append in the iframe, re-initiating");return}t&&(t.src=this.relayerSrc)}};var Lo=Object.assign(Qr(gn,{platform:"web",sdkName:"magic-sdk",version:"29.0.6",defaultEndpoint:"https://auth.magic.link/",ViewController:gt,configureStorage:async()=>{let e=_t.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return await e.defineDriver(Kt),await e.setDriver([_t.default.INDEXEDDB,_t.default.LOCALSTORAGE,Kt._driver]),e}}),{...Ht}),Co=Lo;return Si(Po);})();
if (Magic && Magic.default != null) { Magic = Object.assign(Magic.default, Magic); delete Magic.default; }
